

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>shed package &mdash; SHED  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorials" href="tutorials.html" />
    <link rel="prev" title="Introduction to SHED" href="introduction.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> SHED
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction to SHED</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">shed package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-shed.simple">shed.simple module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-shed.simple_parallel">shed.simple_parallel module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-shed.replay">shed.replay module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SHED</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>shed package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/shed.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="shed-package">
<h1>shed package<a class="headerlink" href="#shed-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-shed.simple">
<span id="shed-simple-module"></span><h2>shed.simple module<a class="headerlink" href="#module-shed.simple" title="Permalink to this headline">¶</a></h2>
<p>Nodes for translating between base data and event model</p>
<dl class="py class">
<dt id="shed.simple.AlignEventStreams">
<em class="property">class </em><code class="sig-prename descclassname">shed.simple.</code><code class="sig-name descname">AlignEventStreams</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">upstreams</span></em>, <em class="sig-param"><span class="n">event_stream_name</span><span class="o">=</span><span class="default_value">'--ALL THE DOCS--'</span></em>, <em class="sig-param"><span class="n">stream_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/simple.html#AlignEventStreams"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.simple.AlignEventStreams" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#shed.simple.align_event_streams" title="shed.simple.align_event_streams"><code class="xref py py-class docutils literal notranslate"><span class="pre">shed.simple.align_event_streams</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt id="shed.simple.LastCache">
<em class="property">class </em><code class="sig-prename descclassname">shed.simple.</code><code class="sig-name descname">LastCache</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">upstream</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">upstreams</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stream_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">loop</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">asynchronous</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ensure_io_loop</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/simple.html#LastCache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.simple.LastCache" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">rapidz.core.Stream</span></code></p>
<p>Cache the last event in all streams then emit them under their own
descriptor when the stop document comes down.</p>
<dl class="py method">
<dt id="shed.simple.LastCache.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">who</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/simple.html#LastCache.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.simple.LastCache.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="shed.simple.SimpleFromEventStream">
<em class="property">class </em><code class="sig-prename descclassname">shed.simple.</code><code class="sig-name descname">SimpleFromEventStream</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">doc_type</span></em>, <em class="sig-param"><span class="n">data_address</span></em>, <em class="sig-param"><span class="n">upstream</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">event_stream_name</span><span class="o">=</span><span class="default_value">'--ALL THE DOCS--'</span></em>, <em class="sig-param"><span class="n">stream_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">principle</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/simple.html#SimpleFromEventStream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.simple.SimpleFromEventStream" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#shed.simple.simple_from_event_stream" title="shed.simple.simple_from_event_stream"><code class="xref py py-class docutils literal notranslate"><span class="pre">shed.simple.simple_from_event_stream</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt id="shed.simple.SimpleToEventStream">
<em class="property">class </em><code class="sig-prename descclassname">shed.simple.</code><code class="sig-name descname">SimpleToEventStream</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">upstream</span></em>, <em class="sig-param"><span class="n">data_keys</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stream_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">data_key_md</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/simple.html#SimpleToEventStream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.simple.SimpleToEventStream" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#shed.simple.simple_to_event_stream" title="shed.simple.simple_to_event_stream"><code class="xref py py-class docutils literal notranslate"><span class="pre">shed.simple.simple_to_event_stream</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt id="shed.simple.align_event_streams">
<em class="property">class </em><code class="sig-prename descclassname">shed.simple.</code><code class="sig-name descname">align_event_streams</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">upstreams</span></em>, <em class="sig-param"><span class="n">event_stream_name</span><span class="o">=</span><span class="default_value">'--ALL THE DOCS--'</span></em>, <em class="sig-param"><span class="n">stream_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/simple.html#align_event_streams"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.simple.align_event_streams" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">rapidz.core.zip</span></code></p>
<p>Zips and aligns multiple streams of documents, note that the last
upstream takes precedence where merging is not possible, this requires
the two streams to be of equal length.</p>
<dl class="py method">
<dt id="shed.simple.align_event_streams.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">who</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/simple.html#align_event_streams.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.simple.align_event_streams.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="shed.simple.build_upstream_node_set">
<code class="sig-prename descclassname">shed.simple.</code><code class="sig-name descname">build_upstream_node_set</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">node</span></em>, <em class="sig-param"><span class="n">s</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/simple.html#build_upstream_node_set"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.simple.build_upstream_node_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a set of all the nodes in a rapidz graph</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> (<em>Stream</em>) – The node to use as a starting point for building the set</p></li>
<li><p><strong>s</strong> (<em>set or None</em>) – The set to put the nodes into. If None return a new set full of nodes</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>s</strong> – The set of nodes in the graph</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>set</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="shed.simple.simple_from_event_stream">
<em class="property">class </em><code class="sig-prename descclassname">shed.simple.</code><code class="sig-name descname">simple_from_event_stream</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">upstream</span></em>, <em class="sig-param"><span class="n">doc_type</span></em>, <em class="sig-param"><span class="n">data_address</span></em>, <em class="sig-param"><span class="n">event_stream_name</span><span class="o">=</span><span class="default_value">'--ALL THE DOCS--'</span></em>, <em class="sig-param"><span class="n">stream_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">principle</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/simple.html#simple_from_event_stream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.simple.simple_from_event_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">rapidz.core.Stream</span></code></p>
<p>Extracts data from the event stream, and passes it downstream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>doc_type</strong> (<em>{‘start’, ‘descriptor’, ‘event’, ‘stop’}</em>) – The type of document to extract data from</p></li>
<li><p><strong>data_address</strong> (<em>tuple</em>) – A tuple of successive keys walking through the document considered,
if the tuple is empty all the data from that document is returned
as a dict</p></li>
<li><p><strong>upstream</strong> (<em>Stream instance or None, optional</em>) – The upstream node to receive streams from, defaults to None</p></li>
<li><p><strong>event_stream_name</strong> (<em>str, optional</em>) – Filter by en event stream name (see :
<a class="reference external" href="http://nsls-ii.github.io/databroker/api.html?highlight=stream_name#data">http://nsls-ii.github.io/databroker/api.html?highlight=stream_name#data</a>)</p></li>
<li><p><strong>stream_name</strong> (<em>str, optional</em>) – Name for this stream node</p></li>
<li><p><strong>principle</strong> (<em>bool, optional</em>) – If True then when this node receives a stop document then all
downstream ToEventStream nodes will issue a stop document.
Defaults to False. Note that one principle node is required for
proper pipeline operation.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The result emitted from this stream no longer follows the document
model.</p>
<p>This node also keeps track of when and which data came through the
node.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">uuid</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">rapidz</span> <span class="kn">import</span> <span class="n">Stream</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shed.translation</span> <span class="kn">import</span> <span class="n">FromEventStream</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ssource</span> <span class="o">=</span> <span class="n">Stream</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s2</span> <span class="o">=</span> <span class="n">FromEventStream</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s1">&#39;event&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;motor1&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s3</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">print</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ophyd.sim</span> <span class="kn">import</span> <span class="n">hw</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hw</span> <span class="o">=</span> <span class="n">hw</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bluesky.run_engine</span> <span class="kn">import</span> <span class="n">RunEngine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">RE</span> <span class="o">=</span> <span class="n">RunEngine</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">bluesky.plans</span> <span class="k">as</span> <span class="nn">bp</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span><span class="o">.</span><span class="n">sink</span><span class="p">(</span><span class="n">pprint</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">RE</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="k">lambda</span> <span class="o">*</span><span class="n">x</span><span class="p">:</span> <span class="n">source</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">RE</span><span class="p">(</span><span class="n">bp</span><span class="o">.</span><span class="n">scan</span><span class="p">([</span><span class="n">hw</span><span class="o">.</span><span class="n">motor1</span><span class="p">],</span> <span class="n">hw</span><span class="o">.</span><span class="n">motor1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">))</span>
</pre></div>
</div>
<p>prints:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">10</span>
</pre></div>
</div>
<dl class="py method">
<dt id="shed.simple.simple_from_event_stream.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">who</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/simple.html#simple_from_event_stream.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.simple.simple_from_event_stream.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="shed.simple.simple_to_event_stream">
<em class="property">class </em><code class="sig-prename descclassname">shed.simple.</code><code class="sig-name descname">simple_to_event_stream</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">upstream</span></em>, <em class="sig-param"><span class="n">data_keys</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stream_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">data_key_md</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/simple.html#simple_to_event_stream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.simple.simple_to_event_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">rapidz.core.Stream</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">shed.doc_gen.CreateDocs</span></code></p>
<p>Converts data into a event stream, and passes it downstream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>upstream</strong> – the upstream node to receive streams from</p></li>
<li><p><strong>data_keys</strong> (<em>tuple, optional</em>) – Names of the data keys. If None assume incoming data is dict and use
the keys from the dict. Defauls to None</p></li>
<li><p><strong>stream_name</strong> (<em>str, optional</em>) – Name for this stream node</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The result emitted from this stream follows the document model.
This is essentially a state machine. Transitions are:
start -&gt; stop
start -&gt; descriptor -&gt; event -&gt; stop
Note that start -&gt; start is not allowed, this node always issues a stop
document so the data input times can be stored.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">uuid</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">rapidz</span> <span class="kn">import</span> <span class="n">Stream</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shed.translation</span> <span class="kn">import</span> <span class="n">FromEventStream</span><span class="p">,</span> <span class="n">ToEventStream</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source</span> <span class="o">=</span> <span class="n">Stream</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s2</span> <span class="o">=</span> <span class="n">FromEventStream</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s1">&#39;event&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;det_image&#39;</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">principle</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s3</span> <span class="o">=</span> <span class="n">ToEventStream</span><span class="p">(</span><span class="n">s2</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;det_image&#39;</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s3</span><span class="o">.</span><span class="n">sink</span><span class="p">(</span><span class="nb">print</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ophyd.sim</span> <span class="kn">import</span> <span class="n">hw</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hw</span> <span class="o">=</span> <span class="n">hw</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bluesky.run_engine</span> <span class="kn">import</span> <span class="n">RunEngine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">RE</span> <span class="o">=</span> <span class="n">RunEngine</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">bluesky.plans</span> <span class="k">as</span> <span class="nn">bp</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span><span class="o">.</span><span class="n">sink</span><span class="p">(</span><span class="n">pprint</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">RE</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="k">lambda</span> <span class="o">*</span><span class="n">x</span><span class="p">:</span> <span class="n">source</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">RE</span><span class="p">(</span><span class="n">bp</span><span class="o">.</span><span class="n">scan</span><span class="p">([</span><span class="n">hw</span><span class="o">.</span><span class="n">motor1</span><span class="p">],</span> <span class="n">hw</span><span class="o">.</span><span class="n">motor1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">))</span>
</pre></div>
</div>
<p>prints:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">,</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="s1">&#39;descriptor&#39;</span><span class="p">,</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="s1">&#39;event&#39;</span><span class="p">,</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="s1">&#39;stop&#39;</span><span class="p">,</span><span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt id="shed.simple.simple_to_event_stream.emit_start">
<code class="sig-name descname">emit_start</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/simple.html#simple_to_event_stream.emit_start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.simple.simple_to_event_stream.emit_start" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="shed.simple.simple_to_event_stream.emit_stop">
<code class="sig-name descname">emit_stop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/simple.html#simple_to_event_stream.emit_stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.simple.simple_to_event_stream.emit_stop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="shed.simple.simple_to_event_stream.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">who</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/simple.html#simple_to_event_stream.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.simple.simple_to_event_stream.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="shed.simple.simple_to_event_stream_new_api">
<em class="property">class </em><code class="sig-prename descclassname">shed.simple.</code><code class="sig-name descname">simple_to_event_stream_new_api</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">descriptor_dicts</span></em>, <em class="sig-param"><span class="n">stream_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/simple.html#simple_to_event_stream_new_api"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.simple.simple_to_event_stream_new_api" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">rapidz.core.Stream</span></code></p>
<p>Converts data into a event stream, and passes it downstream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>descriptor_dicts</strong> (<em>dict</em>) – Dictionary describing the mapping between streams and their associated
metadata. Top level keys are the streams to use accept data from.
The values for these keys are the entries of the <code class="docutils literal notranslate"><span class="pre">descriptor</span></code>
document (<code class="docutils literal notranslate"><span class="pre">data_keys</span></code>, <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">configuration</span></code>, etc.
see _https://nsls-ii.github.io/bluesky/event_descriptors.html for more
details. Note that some of this data is automatically generated if</p></li>
<li><p><strong>stream_name</strong> (<em>str, optional</em>) – Name for this stream node</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The result emitted from this stream follows the document model.
This is essentially a state machine. Transitions are:
start -&gt; stop
start -&gt; descriptor -&gt; event -&gt; stop
Note that start -&gt; start is not allowed, this node always issues a stop
document so the data input times can be stored.</p>
<p>Additionally note that this takes advantage of Python 3.6+ order stable
dictionaries. Since the key order is stable the data keys can be given
in the same order as the elements of streams which contain multiple
elements, see stream a in the example.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">rapidz</span> <span class="kn">import</span> <span class="n">Stream</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shed</span> <span class="kn">import</span> <span class="p">(</span><span class="n">simple_from_event_stream</span><span class="p">,</span>
<span class="gp">... </span>                  <span class="n">simple_to_event_stream_new_api</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">operator</span> <span class="k">as</span> <span class="nn">op</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source</span> <span class="o">=</span> <span class="n">Stream</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stop</span> <span class="o">=</span> <span class="n">simple_from_event_stream</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s1">&#39;stop&#39;</span><span class="p">,</span> <span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fes</span> <span class="o">=</span> <span class="n">simple_from_event_stream</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s1">&#39;event&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;motor1&#39;</span><span class="p">),</span>
<span class="gp">... </span>                               <span class="n">principle</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fes2</span> <span class="o">=</span> <span class="n">simple_from_event_stream</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s1">&#39;event&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="p">),</span>
<span class="gp">... </span>                                <span class="n">principle</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">fes</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">op</span><span class="o">.</span><span class="n">add</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">zip</span><span class="p">(</span><span class="n">fes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">fes</span><span class="o">.</span><span class="n">combine_latest</span><span class="p">(</span><span class="n">stop</span><span class="p">,</span> <span class="n">emit_on</span><span class="o">=</span><span class="n">stop</span><span class="p">)</span><span class="o">.</span><span class="n">pluck</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="n">simple_to_event_stream_new_api</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">{</span>
<span class="gp">... </span>        <span class="n">a</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s1">&#39;data_keys&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;motor1_2&#39;</span><span class="p">:</span> <span class="p">{},</span> <span class="s1">&#39;motor1&#39;</span><span class="p">:</span> <span class="p">{}},</span>
<span class="gp">... </span>        <span class="p">},</span>
<span class="gp">... </span>        <span class="n">b</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;final&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="s1">&#39;data_keys&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;motor1&#39;</span><span class="p">:</span> <span class="p">{}},</span>
<span class="gp">... </span>            <span class="s1">&#39;configuration&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;motor1&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;hi&#39;</span><span class="p">:</span> <span class="s1">&#39;world&#39;</span><span class="p">}}</span>
<span class="gp">... </span>        <span class="p">},</span>
<span class="gp">... </span>        <span class="n">fes2</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;raw&#39;</span><span class="p">}</span>
<span class="gp">... </span>    <span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node2</span> <span class="o">=</span> <span class="n">simple_to_event_stream_new_api</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">{</span><span class="n">fes2</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;primary&#39;</span><span class="p">}}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ophyd.sim</span> <span class="kn">import</span> <span class="n">hw</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hw</span> <span class="o">=</span> <span class="n">hw</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bluesky.run_engine</span> <span class="kn">import</span> <span class="n">RunEngine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">RE</span> <span class="o">=</span> <span class="n">RunEngine</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">bluesky.plans</span> <span class="k">as</span> <span class="nn">bp</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span><span class="o">.</span><span class="n">sink</span><span class="p">(</span><span class="n">pprint</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">RE</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="k">lambda</span> <span class="o">*</span><span class="n">x</span><span class="p">:</span> <span class="n">source</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">RE</span><span class="p">(</span><span class="n">bp</span><span class="o">.</span><span class="n">scan</span><span class="p">([</span><span class="n">hw</span><span class="o">.</span><span class="n">motor1</span><span class="p">],</span> <span class="n">hw</span><span class="o">.</span><span class="n">motor1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">))</span>
</pre></div>
</div>
<p>prints:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">,</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="s1">&#39;descriptor&#39;</span><span class="p">,</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="s1">&#39;event&#39;</span><span class="p">,</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="s1">&#39;stop&#39;</span><span class="p">,</span><span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt id="shed.simple.simple_to_event_stream_new_api.emit_start">
<code class="sig-name descname">emit_start</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/simple.html#simple_to_event_stream_new_api.emit_start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.simple.simple_to_event_stream_new_api.emit_start" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="shed.simple.simple_to_event_stream_new_api.emit_stop">
<code class="sig-name descname">emit_stop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/simple.html#simple_to_event_stream_new_api.emit_stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.simple.simple_to_event_stream_new_api.emit_stop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="shed.simple.simple_to_event_stream_new_api.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">who</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/simple.html#simple_to_event_stream_new_api.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.simple.simple_to_event_stream_new_api.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="shed.simple.walk_to_translation">
<code class="sig-prename descclassname">shed.simple.</code><code class="sig-name descname">walk_to_translation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">node</span></em>, <em class="sig-param"><span class="n">graph</span></em>, <em class="sig-param"><span class="n">prior_node</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/simple.html#walk_to_translation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.simple.walk_to_translation" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a graph that is a subset of the graph from the stream.</p>
<p>The walk starts at a translation <code class="docutils literal notranslate"><span class="pre">ToEventStream</span></code> node and ends at any
instances of FromEventStream or ToEventStream.  Each iteration of the
walk goes up one node, determines if that node is a <code class="docutils literal notranslate"><span class="pre">FromEventStream</span></code>
node, if not walks one down to see if there are any <code class="docutils literal notranslate"><span class="pre">ToEventStream</span></code>
nodes, if not it keeps walking up. The walk down allows us to replace
live data with stored data/stubs when it comes time to get the parent
uids. Graph nodes are hashes or uids of the node objects with
<code class="docutils literal notranslate"><span class="pre">stream=node</span></code> in the nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> (<em>Stream instance</em>)</p></li>
<li><p><strong>graph</strong> (<em>DiGraph instance</em>)</p></li>
<li><p><strong>prior_node</strong> (<em>Stream instance</em>)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-shed.simple_parallel">
<span id="shed-simple-parallel-module"></span><h2>shed.simple_parallel module<a class="headerlink" href="#module-shed.simple_parallel" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="shed.simple_parallel.SimpleToEventStream">
<em class="property">class </em><code class="sig-prename descclassname">shed.simple_parallel.</code><code class="sig-name descname">SimpleToEventStream</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">upstream</span></em>, <em class="sig-param"><span class="n">data_keys</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stream_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/simple_parallel.html#SimpleToEventStream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.simple_parallel.SimpleToEventStream" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">rapidz.parallel.ParallelStream</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">shed.doc_gen.CreateDocs</span></code></p>
<p>Converts data into a event stream, and passes it downstream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>upstream</strong> – the upstream node to receive streams from</p></li>
<li><p><strong>data_keys</strong> (<em>tuple, optional</em>) – Names of the data keys. If None assume incoming data is dict and use
the keys from the dict. Defauls to None</p></li>
<li><p><strong>stream_name</strong> (<em>str, optional</em>) – Name for this stream node</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The result emitted from this stream follows the document model.
This is essentially a state machine. Transitions are:
start -&gt; stop
start -&gt; descriptor -&gt; event -&gt; stop
Note that start -&gt; start is not allowed, this node always issues a stop
document so the data input times can be stored.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">uuid</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">rapidz</span> <span class="kn">import</span> <span class="n">Stream</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shed.translation</span> <span class="kn">import</span> <span class="n">FromEventStream</span><span class="p">,</span> <span class="n">ToEventStream</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source</span> <span class="o">=</span> <span class="n">Stream</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s2</span> <span class="o">=</span> <span class="n">FromEventStream</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s1">&#39;event&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;det_image&#39;</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">principle</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s3</span> <span class="o">=</span> <span class="n">ToEventStream</span><span class="p">(</span><span class="n">s2</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;det_image&#39;</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s3</span><span class="o">.</span><span class="n">sink</span><span class="p">(</span><span class="nb">print</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ophyd.sim</span> <span class="kn">import</span> <span class="n">hw</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hw</span> <span class="o">=</span> <span class="n">hw</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bluesky.run_engine</span> <span class="kn">import</span> <span class="n">RunEngine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">RE</span> <span class="o">=</span> <span class="n">RunEngine</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">bluesky.plans</span> <span class="k">as</span> <span class="nn">bp</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span><span class="o">.</span><span class="n">sink</span><span class="p">(</span><span class="n">pprint</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">RE</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="k">lambda</span> <span class="o">*</span><span class="n">x</span><span class="p">:</span> <span class="n">source</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">RE</span><span class="p">(</span><span class="n">bp</span><span class="o">.</span><span class="n">scan</span><span class="p">([</span><span class="n">hw</span><span class="o">.</span><span class="n">motor1</span><span class="p">],</span> <span class="n">hw</span><span class="o">.</span><span class="n">motor1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">))</span>
</pre></div>
</div>
<p>prints:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">,</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="s1">&#39;descriptor&#39;</span><span class="p">,</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="s1">&#39;event&#39;</span><span class="p">,</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="s1">&#39;stop&#39;</span><span class="p">,</span><span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt id="shed.simple_parallel.SimpleToEventStream.descriptor">
<code class="sig-name descname">descriptor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/simple_parallel.html#SimpleToEventStream.descriptor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.simple_parallel.SimpleToEventStream.descriptor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="shed.simple_parallel.SimpleToEventStream.emit">
<code class="sig-name descname">emit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">asynchronous</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/simple_parallel.html#SimpleToEventStream.emit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.simple_parallel.SimpleToEventStream.emit" title="Permalink to this definition">¶</a></dt>
<dd><p>Push data into the stream at this point</p>
<p>This is typically done only at source Streams but can theortically be
done at any point</p>
</dd></dl>

<dl class="py method">
<dt id="shed.simple_parallel.SimpleToEventStream.emit_start">
<code class="sig-name descname">emit_start</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/simple_parallel.html#SimpleToEventStream.emit_start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.simple_parallel.SimpleToEventStream.emit_start" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="shed.simple_parallel.SimpleToEventStream.emit_stop">
<code class="sig-name descname">emit_stop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/simple_parallel.html#SimpleToEventStream.emit_stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.simple_parallel.SimpleToEventStream.emit_stop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="shed.simple_parallel.SimpleToEventStream.start_doc">
<code class="sig-name descname">start_doc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/simple_parallel.html#SimpleToEventStream.start_doc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.simple_parallel.SimpleToEventStream.start_doc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="shed.simple_parallel.SimpleToEventStream.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">who</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/simple_parallel.html#SimpleToEventStream.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.simple_parallel.SimpleToEventStream.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-shed.replay">
<span id="shed-replay-module"></span><h2>shed.replay module<a class="headerlink" href="#module-shed.replay" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="shed.replay.rebuild_node">
<code class="sig-prename descclassname">shed.replay.</code><code class="sig-name descname">rebuild_node</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">node_dict</span></em>, <em class="sig-param"><span class="n">graph</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/replay.html#rebuild_node"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.replay.rebuild_node" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="shed.replay.replay">
<code class="sig-prename descclassname">shed.replay.</code><code class="sig-name descname">replay</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">db</span></em>, <em class="sig-param"><span class="n">hdr</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/shed/replay.html#replay"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shed.replay.replay" title="Permalink to this definition">¶</a></dt>
<dd><p>Replay data analysis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>db</strong> (<em>Broker instance</em>) – The databroker to pull data from</p></li>
<li><p><strong>hdr</strong> (<em>Header instance</em>) – The analyzed data header</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>loaded_graph</strong> (<em>DiGraph</em>) – The data processing pipeline as a graph</p></li>
<li><p><strong>parent_nodes</strong> (<em>dict</em>) – The source nodes for the graph</p></li>
<li><p><strong>data</strong> (<em>dict</em>) – A map between the document uids and documents</p></li>
<li><p><strong>vs</strong> (<em>list</em>) – List of document uid in time order</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">graph</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">vs</span> <span class="o">=</span> <span class="n">replay</span><span class="p">(</span><span class="n">db</span><span class="p">,</span> <span class="n">hdr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">vs</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">parents</span><span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="s2">&quot;node&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="s2">&quot;uid&quot;</span><span class="p">]])</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tutorials.html" class="btn btn-neutral float-right" title="Tutorials" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="introduction.html" class="btn btn-neutral float-left" title="Introduction to SHED" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Author

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>